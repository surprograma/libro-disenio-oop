"use strict";(self.webpackChunklibro_disenio_oop=self.webpackChunklibro_disenio_oop||[]).push([[627],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=c(n),u=o,k=m["".concat(s,".").concat(u)]||m[u]||p[u]||r;return n?a.createElement(k,i(i({ref:t},d),{},{components:n})):a.createElement(k,i({ref:t},d))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9400:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var a=n(2122),o=n(9756),r=(n(7294),n(3905)),i=["components"],l={sidebar_position:2,title:"Matchers de Kotest",description:"Machete sobre las formas m\xe1s comunes para verificar condiciones en los tests."},s=void 0,c={unversionedId:"kotlin/matchers-kotest",id:"kotlin/matchers-kotest",isDocsHomePage:!1,title:"Matchers de Kotest",description:"Machete sobre las formas m\xe1s comunes para verificar condiciones en los tests.",source:"@site/docs/kotlin/matchers-kotest.md",sourceDirName:"kotlin",slug:"/kotlin/matchers-kotest",permalink:"/libro-disenio-oop/docs/kotlin/matchers-kotest",editUrl:"https://github.com/surprograma/libro-disenio-oop/edit/main/docs/kotlin/matchers-kotest.md",version:"current",lastUpdatedBy:"Federico Aloi",lastUpdatedAt:1628626901,formattedLastUpdatedAt:"8/10/2021",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Matchers de Kotest",description:"Machete sobre las formas m\xe1s comunes para verificar condiciones en los tests."},sidebar:"tutorialSidebar",previous:{title:"De Wollok a Kotlin",permalink:"/libro-disenio-oop/docs/kotlin/wollok-a-kotlin"},next:{title:"LocalDateTime en un minuto",permalink:"/libro-disenio-oop/docs/kotlin/localdatetime-un-minuto"}},d=[{value:"Igualdad",id:"igualdad",children:[{value:"Un caso especial: n\xfameros decimales",id:"un-caso-especial-n\xfameros-decimales",children:[]}]},{value:"Colecciones",id:"colecciones",children:[{value:"Control estricto de elementos",id:"control-estricto-de-elementos",children:[]}]},{value:"Excepciones",id:"excepciones",children:[]}],p={toc:d};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Esta es una lista, para nada exhaustiva, de los ",(0,r.kt)("em",{parentName:"p"},"matchers")," que tiene Kotest (m\xe9todos para verificar condiciones en los tests)."),(0,r.kt)("p",null,"Para ver otros m\xe9todos, recomendamos leer ",(0,r.kt)("a",{parentName:"p",href:"https://kotest.io/docs/assertions/core-matchers.html"},"la documentaci\xf3n"),"."),(0,r.kt)("h2",{id:"igualdad"},"Igualdad"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Sintaxis"),(0,r.kt)("th",{parentName:"tr",align:null},"Sirve para verificar..."))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"objeto.shouldBe(otro)")),(0,r.kt)("td",{parentName:"tr",align:null},"...si un ",(0,r.kt)("inlineCode",{parentName:"td"},"objeto")," ",(0,r.kt)("strong",{parentName:"td"},"es igual")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"otro"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"objeto.shouldNotBe(otro)")),(0,r.kt)("td",{parentName:"tr",align:null},"...si un ",(0,r.kt)("inlineCode",{parentName:"td"},"objeto")," ",(0,r.kt)("strong",{parentName:"td"},"es distinto")," a ",(0,r.kt)("inlineCode",{parentName:"td"},"otro"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"booleano.shouldBeTrue()")),(0,r.kt)("td",{parentName:"tr",align:null},"...si un ",(0,r.kt)("inlineCode",{parentName:"td"},"booleano")," ",(0,r.kt)("strong",{parentName:"td"},"es verdadero"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"booleano.shouldBeFalse()")),(0,r.kt)("td",{parentName:"tr",align:null},"...si un ",(0,r.kt)("inlineCode",{parentName:"td"},"booleano")," ",(0,r.kt)("strong",{parentName:"td"},"es falso"),".")))),(0,r.kt)("h3",{id:"un-caso-especial-n\xfameros-decimales"},"Un caso especial: n\xfameros decimales"),(0,r.kt)("p",null,"En inform\xe1tica, las operaciones con decimales suelen implementarse con una t\xe9cnica llamada ",(0,r.kt)("a",{parentName:"p",href:"http://puntoflotante.org/"},(0,r.kt)("strong",{parentName:"a"},"punto flotante")),". Esta implementaci\xf3n trae aparejada una serie de imprecisiones, que afectan entre otras cosas a la ",(0,r.kt)("a",{parentName:"p",href:"http://puntoflotante.org/errors/comparison/"},"comparaci\xf3n"),"."),(0,r.kt)("p",null,"Para evitar casos en los que un test rompa porque ",(0,r.kt)("inlineCode",{parentName:"p"},'"se esperaba 2.78 pero se obtuvo 2.78000000001"'),", estas comparaciones se suelen hacer con una cierta ",(0,r.kt)("strong",{parentName:"p"},"tolerancia"),", que indica cu\xe1l es el desfasaje m\xe1ximo aceptable."),(0,r.kt)("p",null,"En Kotest, podemos configurar una tolerancia de la siguiente manera:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"// Aceptamos como v\xe1lido a cualquier n\xfamero entre 2.77 y 2.79\nnumero.shouldBe(2.78 plusOrMinus 0.01)\n")),(0,r.kt)("h2",{id:"colecciones"},"Colecciones"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Sintaxis"),(0,r.kt)("th",{parentName:"tr",align:null},"Sirve para verificar..."))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"coleccion.shouldBeEmpty()")),(0,r.kt)("td",{parentName:"tr",align:null},"...si la colecci\xf3n ",(0,r.kt)("strong",{parentName:"td"},"est\xe1 vac\xeda"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"coleccion.shouldBeUnique()")),(0,r.kt)("td",{parentName:"tr",align:null},"...si la colecci\xf3n ",(0,r.kt)("strong",{parentName:"td"},"no tiene duplicados"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"coleccion.shouldContain(elemento)")),(0,r.kt)("td",{parentName:"tr",align:null},"...si la colecci\xf3n ",(0,r.kt)("strong",{parentName:"td"},"contiene")," al ",(0,r.kt)("inlineCode",{parentName:"td"},"elemento"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"coleccion.shouldContainAll(elem1, elem2, ...)")),(0,r.kt)("td",{parentName:"tr",align:null},"...si la colecci\xf3n ",(0,r.kt)("strong",{parentName:"td"},"contiene a todos")," los elementos indicados.")))),(0,r.kt)("p",null,"\ud83d\udc40 ",(0,r.kt)("strong",{parentName:"p"},"Ojo:")," los dos \xfaltimos matchers verifican que los elementos dados existan, pero no dicen nada sobre los dem\xe1s elementos de la colecci\xf3n."),(0,r.kt)("h3",{id:"control-estricto-de-elementos"},"Control estricto de elementos"),(0,r.kt)("p",null,"Algunas veces nos alcanza con verificar que los elementos que queremos existan, pero otras necesitamos verificar tambi\xe9n que no haya otros elementos."),(0,r.kt)("p",null,"En ese caso, deber\xedamos usar alguno de los matchers que vienen a continuaci\xf3n:"),(0,r.kt)("h4",{id:"verificando-que-aparezan-en-cierto-orden"},"Verificando que aparezan en cierto orden:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"unaLista.shouldContainExactly(elem1, elem2, ...)\n// o pasando una lista:\nunaLista.shouldContainExactly(otraLista)\n")),(0,r.kt)("h4",{id:"sin-importar-en-qu\xe9-orden-aparecen"},"Sin importar en qu\xe9 orden aparecen:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"unaLista.shouldContainExactlyInAnyOrder(elem1, elem2, ...)\n// o pasando una lista:\nunaLista.shouldContainExactlyInAnyOrder(otraLista)\n")),(0,r.kt)("h2",{id:"excepciones"},"Excepciones"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'// Verificando el mensaje\nshouldThrowMessage("Ac\xe1 va el mensaje de error que tira") {\n  codigoQueDeberiaLanzarUnError()\n}\n\n// Sin verificar el mensaje\nshouldThrowAny {\n  codigoQueDeberiaLanzarUnError()\n}\n')))}m.isMDXComponent=!0}}]);
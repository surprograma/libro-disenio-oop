---
sidebar_position: 4
title: Manejo de fechas
description: C√≥mo manipular y comparar fechas en Kotlin utilizando las clases de Java 8.
---

import CodeBlock from '@theme/CodeBlock';

<!-- Qu√© complicado sacarle un ISO string a JS üôÑ -->

export const hoy = new Date().toLocaleString('sv').slice(0, 10);

Hasta antes de la llegada de Java 8, el manejo de fechas era bastante engorroso y muchas veces terminaba realiz√°ndose con bibliotecas externas. A partir de esa versi√≥n, se incorporan dos clases completamente nuevas, que por ser nativas terminan por reemplazar a los otras opciones existentes.

Como hemos dicho en alguna otra oportunidad, en Kotlin se puede usar cualquier clase de Java, y por eso es que Kotlin no incluye una API propia para manejar fechas.

La clases en cuesti√≥n son: `LocalDate`, con la cual podemos representar una fecha, y `LocalDateTime`, con la cual podemos adem√°s establecer la hora.

## Ejemplo pr√°ctico

Una peque√±a muestra de qu√© puede hacerse con `LocalDate` y `LocalDateTime`:

### Creaci√≥n

<CodeBlock className="language-kotlin">{`import java.time.LocalDate
import java.time.LocalDateTime
\ 
// Instancia de LocalDate con los valores de la fecha actual del sistema.
val fechaActual = LocalDate.now()
>>> ${hoy}
\ 
// Instancia de LocalDate con valores que recibe por par√°metro.
// Notar que el orden es siempre de mayor a menor: a√±o, mes, d√≠a.
val renunciaDeLaRua = LocalDate.of(2001, 12, 20)
>>> 2001-12-20
\ 
// Se agregan los valores para hora, minutos y segundos (todos cero en este caso).
val inicioAislamientoArgentina = LocalDateTime.of(2020, 3, 20, 0, 0, 0)
>>> 2020-03-20T00:00:00
`}

</CodeBlock>

### Comparaci√≥n con otras fechas

```kotlin
// Devuelve un booleano indicando si la fecha es posterior
// a la que viene por par√°metro.
fechaActual.isAfter(renunciaDeLaRua)
>>> true

// En este caso, como `inicioAislamientoArgentina` es LocalDateTime,
// hay que convertirlo a LocalDate para poder compararlo.
fechaActual.isBefore(inicioAislamientoArgentina.toLocalDate())
>>> false
```

### Manipulaci√≥n

:::caution Ojo al piojo

Todos estos m√©todos devuelven un _nuevo objeto_ que representa al resultado, y nunca cambian al original ([mutaciones controladas](/docs/cualidades-disenio/cualidades-independientes-tecnologia/#mutaciones-controladas), creo que eso lo le√≠ en alg√∫n lado... ü§î).

:::

```kotlin
// Este m√©todo devuelve *una nueva fecha*, con doce d√≠as m√°s.
// Notar que hace lo que se espera que haga: actualiza mes y a√±o si es necesario.
renunciaDeLaRua.plusDays(12)
>>> 2002-01-01

// Para los LocalDateTime, tambi√©n hay m√©todos para manipular la hora.
inicioAislamientoArgentina.plusMinutes(20)
>>> 2020-03-20T00:20:00
```

### Transformar un string en fecha

Tanto `LocalDate` como `LocalDateTime` entienden el m√©todo `parse`, que transforma un _string_ al objeto correspondiente. Obviamente, para que esto funcione el _string_ tiene que tener alg√∫n formato v√°lido.

Por defecto, se asume que el _string_ viene en [formato ISO 8601](https://es.wikipedia.org/wiki/ISO_8601), pero eso se puede configurar pasando un segundo par√°metro.

Veamos algunos ejemplos:

```kotlin
// Transformar una fecha en formato ISO
LocalDate.parse("2022-08-09")
>> 2022-08-09

// Transformar una fecha y hora en formato ISO
LocalDateTime.parse("2022-08-09T14:19:40")
>> 2022-08-09T14:19:40

// Transformar una fecha y hora, con milisegundos, en formato ISO
LocalDateTime.parse("2022-08-09T14:19:40.366")
>> 2022-08-09T14:19:40.366

// Transformar una fecha y hora en formato ISO con zona horaria UTC (Z)
LocalDateTime.parse("2022-08-09T14:19:40Z", DateTimeFormatter.ISO_OFFSET_DATE_TIME)
>> 2022-08-09T14:19:40

// Transformar una fecha y hora en formato ISO con zona horaria -3
LocalDateTime.parse("2022-08-09T14:19:40+03:00", DateTimeFormatter.ISO_OFFSET_DATE_TIME)
>> 2022-08-09T14:19:40
```

### Mostrar una fecha como string

Para el caso inverso al anterior, tanto `LocalDate` como `LocalDateTime` ofrecen un m√©todo `format`, que convierte la fecha en un _string_. En general, esto resulta √∫til cuando queremos mostrarle informaci√≥n a un usuario.

Veamos algunos ejemplos:

```kotlin
// Si omitimos los segundos, los toma como 0
val nacimientoJuana = LocalDateTime.of(1987, 3, 4, 12, 34)

// Fecha y hora
nacimientoJuana.format(DateTimeFormatter.ISO_DATE_TIME)
"1987-03-04T12:34:00"

// Solo la fecha
nacimientoJuana.format(DateTimeFormatter.ISO_DATE)
"1987-03-04"

// Solo la hora
nacimientoJuana.format(DateTimeFormatter.ISO_TIME)
"12:34:00"
```

## Documentaci√≥n oficial

Con lo de arriba deber√≠a ser suficiente para resolver la mayor√≠a de los ejercicios de nuestros cursos.

Te dejamos la documentaci√≥n oficial de [`LocalDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html) y la de [`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html) por si quer√©s chusmear algo m√°s.
